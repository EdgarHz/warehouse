#!/bin/sh


WarehouseBaseDir=`dirname $0`/..
RepoRootDirName="repos"
RegisterTxtFileName="RepoList.txt"

RepoRootDir="$WarehouseBaseDir/RepoRootDirName"

. "$WarehouseBaseDir/bin/zrCommon.sh"
#创建相关目录
function checkDir(){
	cd $WarehouseBaseDir
	if [ ! -d $RepoRootDirName ]; then
	  mkdir $RepoRootDirName
	  echo "$RepoRootDirName/" | cat >> .gitignore
	fi

	if [ ! -f $RegisterTxtFileName ]; then
	  touch $RegisterTxtFileName
	fi
}

#写到列表文件
function writeInfoToList(){
	local Url=$1;
	local Keyword=$2;
	local LineContent="$Url \tkeywords: $Keyword"
	echo $LineContent | cat >> $WarehouseBaseDir/$RegisterTxtFileName
	sort $WarehouseBaseDir/$RegisterTxtFileName | uniq | cat > $WarehouseBaseDir/temp.txt
	mv $WarehouseBaseDir/temp.txt $WarehouseBaseDir/$RegisterTxtFileName
}

checkDir